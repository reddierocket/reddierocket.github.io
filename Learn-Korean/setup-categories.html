<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Setup Standard Categories</title>
</head>
<body>
<h1>Setting up Standard Categories in Firestore...</h1>
<div id="status">Starting...</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { getFirestore, setDoc, doc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDU71Csn0moQ8AGOsPIJOkVMAmVODzZiEU",
  authDomain: "rockthecat-d9617.firebaseapp.com",
  projectId: "rockthecat-d9617",
  storageBucket: "rockthecat-d9617.firebasestorage.app",
  messagingSenderId: "537950791174",
  appId: "1:537950791174:web:a5a2434536e3cf95f9c587"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

const standardCategories = [
  "intro", "medical", "family", "grammar", "business",
  "formal", "sino", "food", "animals", "activities",
  "travel", "vocabulary"
];

onAuthStateChanged(auth, async (user) => {
  if (!user) {
    document.getElementById("status").textContent = "You must be signed in.";
    return;
  }

  document.getElementById("status").textContent = `Signed in as ${user.email}. Creating categories...`;

  try {
    for (let cat of standardCategories) {
      await setDoc(doc(db, "categories", "standard", "items", cat), { createdBy: user.uid });
    }
    document.getElementById("status").textContent = "✅ Standard categories created successfully!";
  } catch (error) {
    console.error(error);
    document.getElementById("status").textContent = "❌ Error creating categories. Check console.";
  }
});
</script>
</body>
</html>
